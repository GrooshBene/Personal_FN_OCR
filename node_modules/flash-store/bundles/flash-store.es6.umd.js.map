{"version":3,"file":"flash-store.es6.umd.js","sources":["../dist/config.js","../dist/flash-store.js","../dist/flash-store-sync.js"],"sourcesContent":["/// <reference path=\"./typings.d.ts\" />\n// https://github.com/Microsoft/TypeScript/issues/14151#issuecomment-280812617\nif (!Symbol.asyncIterator) {\n    Symbol.asyncIterator = Symbol.for('Symbol.asyncIterator');\n}\nimport { Brolog } from 'brolog';\nexport const log = new Brolog();\nexport let VERSION = '0.0.0';\ntry {\n    const pkg = require('../package.json');\n    VERSION = pkg.version;\n}\ncatch (e) {\n    const pkg = require('../../package.json');\n    VERSION = pkg.version;\n}\n//# sourceMappingURL=config.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nvar __asyncDelegator = (this && this.__asyncDelegator) || function (o) {\n    var i, p;\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\n};\nimport * as path from 'path';\nimport { path as appRoot, } from 'app-root-path';\nimport rimraf from 'rimraf';\nimport encoding from 'encoding-down';\nimport LevelDb from 'nosql-leveldb';\nimport levelup from 'levelup';\n// https://github.com/rollup/rollup/issues/1267#issuecomment-296395734\n// const rimraf    = (<any>rimrafProxy).default    || rimrafProxy\n// const encoding  = (<any>encodingProxy).default  || encodingProxy\n// // const leveldown = (<any>leveldownProxy).default || leveldownProxy\n// const levelup   = (<any>levelupProxy).default   || levelupProxy\nimport { log, VERSION, } from './config';\nexport class FlashStore {\n    /**\n     * FlashStore is a Key-Value database tool and makes using leveldb more easy for Node.js\n     *\n     * Creates an instance of FlashStore.\n     * @param {string} [workdir=path.join(appRoot, 'flash-store.workdir')]\n     * @example\n     * import { FlashStore } from 'flash-store'\n     * const flashStore = new FlashStore('flashstore.workdir')\n     */\n    constructor(workdir = path.join(appRoot, '.flash-store')) {\n        this.workdir = workdir;\n        log.verbose('FlashStore', 'constructor()');\n        // https://twitter.com/juliangruber/status/908688876381892608\n        const encoded = encoding(\n        // leveldown(workdir),\n        LevelDb(workdir), {\n            // FIXME: issue #2\n            valueEncoding: 'json',\n        });\n        this.levelDb = levelup(encoded);\n        // console.log((this.levelDb as any)._db.codec)\n        this.levelDb.setMaxListeners(17); // default is Infinity\n    }\n    version() {\n        return VERSION;\n    }\n    /**\n     * Put data in database\n     *\n     * @param {K} key\n     * @param {V} value\n     * @returns {Promise<void>}\n     * @example\n     * await flashStore.put(1, 1)\n     */\n    put(key, value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.warn('FlashStore', '`put()` DEPRECATED. use `set()` instead.');\n            yield this.set(key, value);\n        });\n    }\n    set(key, value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.verbose('FlashStore', 'set(%s, %s) value type: %s', key, value, typeof value);\n            // FIXME: issue #2\n            yield this.levelDb.put(key, JSON.stringify(value));\n        });\n    }\n    /**\n     * Get value from database by key\n     *\n     * @param {K} key\n     * @returns {(Promise<V | null>)}\n     * @example\n     * console.log(await flashStore.get(1))\n     */\n    get(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.verbose('FlashStore', 'get(%s)', key);\n            try {\n                // FIXME: issue #2\n                return JSON.parse(yield this.levelDb.get(key));\n            }\n            catch (e) {\n                if (/^NotFoundError/.test(e)) {\n                    return undefined;\n                }\n                throw e;\n            }\n        });\n    }\n    /**\n     * Del data by key\n     *\n     * @param {K} key\n     * @returns {Promise<void>}\n     * @example\n     * await flashStore.del(1)\n     */\n    del(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.verbose('FlashStore', '`del()` DEPRECATED. use `delete()` instead');\n            yield this.delete(key);\n        });\n    }\n    delete(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.verbose('FlashStore', 'delete(%s)', key);\n            yield this.levelDb.del(key);\n        });\n    }\n    /**\n     * @typedef IteratorOptions\n     *\n     * @property { any }      gt       - Matches values that are greater than a specified value\n     * @property { any }      gte      - Matches values that are greater than or equal to a specified value.\n     * @property { any }      lt       - Matches values that are less than a specified value.\n     * @property { any }      lte      - Matches values that are less than or equal to a specified value.\n     * @property { boolean }  reverse  - Reverse the result set\n     * @property { number }   limit    - Limits the number in the result set.\n     * @property { any }      prefix   - Make the same prefix key get together.\n     */\n    /**\n     * Find keys by IteratorOptions\n     *\n     * @param {IteratorOptions} [options={}]\n     * @returns {AsyncIterableIterator<K>}\n     * @example\n     * const flashStore = new FlashStore('flashstore.workdir')\n     * for await(const key of flashStore.keys({gte: 1})) {\n     *   console.log(key)\n     * }\n     */\n    keys(options = {}) {\n        return __asyncGenerator(this, arguments, function* keys_1() {\n            var e_1, _a;\n            log.verbose('FlashStore', 'keys()');\n            // options = Object.assign(options, {\n            //   keys   : true,\n            //   values : false,\n            // })\n            if (options.prefix) {\n                if (options.gte || options.lte) {\n                    throw new Error('can not specify `prefix` with `gte`/`lte` together.');\n                }\n                options.gte = options.prefix;\n                options.lte = options.prefix + '\\xff';\n            }\n            try {\n                for (var _b = __asyncValues(this.entries(options)), _c; _c = yield __await(_b.next()), !_c.done;) {\n                    const [key] = _c.value;\n                    yield yield __await(key);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) yield __await(_a.call(_b));\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n    /**\n     * Find all values\n     *\n     * @returns {AsyncIterableIterator<V>}\n     * @example\n     * const flashStore = new FlashStore('flashstore.workdir')\n     * for await(const value of flashStore.values()) {\n     *   console.log(value)\n     * }\n     */\n    values(options = {}) {\n        return __asyncGenerator(this, arguments, function* values_1() {\n            var e_2, _a;\n            log.verbose('FlashStore', 'values()');\n            try {\n                // options = Object.assign(options, {\n                //   keys   : false,\n                //   values : true,\n                // })\n                for (var _b = __asyncValues(this.entries(options)), _c; _c = yield __await(_b.next()), !_c.done;) {\n                    const [, value] = _c.value;\n                    yield yield __await(value);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) yield __await(_a.call(_b));\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        });\n    }\n    /**\n     * Get the counts of the database\n     * @deprecated use property `size` instead\n     * @returns {Promise<number>}\n     * @example\n     * const count = await flashStore.count()\n     * console.log(`database count: ${count}`)\n     */\n    count() {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.warn('FlashStore', '`count()` DEPRECATED. use `size()` instead.');\n            const size = yield this.size;\n            return size;\n        });\n    }\n    get size() {\n        log.verbose('FlashStore', 'size()');\n        // TODO: is there a better way to count all items from the db?\n        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n            var e_3, _a;\n            try {\n                let count = 0;\n                try {\n                    for (var _b = __asyncValues(this), _c; _c = yield _b.next(), !_c.done;) {\n                        const _ = _c.value;\n                        count++;\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n                resolve(count);\n            }\n            catch (e) {\n                reject(e);\n            }\n        }));\n    }\n    /**\n     * FIXME: use better way to do this\n     */\n    has(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const val = yield this.get(key);\n            return !!val;\n        });\n    }\n    /**\n     * TODO: use better way to do this with leveldb\n     */\n    clear() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var e_4, _a;\n            try {\n                for (var _b = __asyncValues(this.keys()), _c; _c = yield _b.next(), !_c.done;) {\n                    const key = _c.value;\n                    yield this.delete(key);\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n        });\n    }\n    /**\n     * @private\n     */\n    entries(options) {\n        return __asyncGenerator(this, arguments, function* entries_1() {\n            log.verbose('FlashStore', '*entries(%s)', JSON.stringify(options));\n            const iterator = this.levelDb.db.iterator(options);\n            while (true) {\n                const pair = yield __await(new Promise((resolve, reject) => {\n                    iterator.next(function (err, key, val) {\n                        if (err) {\n                            reject(err);\n                        }\n                        if (!key && !val) {\n                            return resolve(null);\n                        }\n                        if (val) {\n                            // FIXME: issue #2\n                            val = JSON.parse(val);\n                        }\n                        return resolve([key, val]);\n                    });\n                }));\n                if (!pair) {\n                    break;\n                }\n                yield yield __await(pair);\n            }\n        });\n    }\n    [Symbol.asyncIterator]() {\n        return __asyncGenerator(this, arguments, function* _a() {\n            log.verbose('FlashStore', '*[Symbol.asyncIterator]()');\n            yield __await(yield* __asyncDelegator(__asyncValues(this.entries())));\n        });\n    }\n    /**\n     * @private\n     */\n    streamAsyncIterator() {\n        return __asyncGenerator(this, arguments, function* streamAsyncIterator_1() {\n            log.warn('FlashStore', 'DEPRECATED *[Symbol.asyncIterator]()');\n            const readStream = this.levelDb.createReadStream();\n            const endPromise = new Promise((resolve, reject) => {\n                readStream\n                    .once('end', () => resolve(false))\n                    .once('error', reject);\n            });\n            let pair;\n            do {\n                const dataPromise = new Promise(resolve => {\n                    readStream.once('data', (data) => resolve([data.key, data.value]));\n                });\n                pair = yield __await(Promise.race([\n                    dataPromise,\n                    endPromise,\n                ]));\n                if (pair) {\n                    yield yield __await(pair);\n                }\n            } while (pair);\n        });\n    }\n    close() {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.verbose('FlashStore', 'close()');\n            yield this.levelDb.close();\n        });\n    }\n    /**\n     * Destroy the database\n     *\n     * @returns {Promise<void>}\n     */\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.verbose('FlashStore', 'destroy()');\n            yield this.levelDb.close();\n            yield new Promise(resolve => rimraf(this.workdir, resolve));\n        });\n    }\n}\nexport default FlashStore;\n//# sourceMappingURL=flash-store.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport cuid from 'cuid';\nimport { StateSwitch, } from 'state-switch';\nimport { log, } from './config';\nimport { FlashStore, } from './flash-store';\nexport class FlashStoreSync {\n    constructor(workdir) {\n        this.workdir = workdir;\n        log.verbose('CacheStore', 'constructor(%s)', workdir);\n        workdir = workdir || '.flash-store-sync';\n        this.asyncBusyDict = {};\n        this.asyncBusyState = new StateSwitch('Busy:' + workdir.split('/').pop(), // get the latest folder name\n        log);\n        this.cacheMap = new Map();\n        this.flashStore = new FlashStore(workdir);\n        this.asyncBusyAdd(this.loadStoreToCache());\n    }\n    loadStoreToCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var e_1, _a;\n            this.cacheMap.clear();\n            try {\n                for (var _b = __asyncValues(this.flashStore), _c; _c = yield _b.next(), !_c.done;) {\n                    const [key, val] = _c.value;\n                    this.cacheMap.set(key, val);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n    asyncBusyAdd(task) {\n        this.asyncBusyState.on(true);\n        const id = cuid();\n        this.asyncBusyDict[id] = task.finally(() => {\n            delete this.asyncBusyDict[id];\n            if (Object.keys(this.asyncBusyDict).length <= 0) {\n                this.asyncBusyState.off(true);\n            }\n        });\n    }\n    version() {\n        return this.flashStore.version();\n    }\n    /**\n     *\n     * Async methods:\n     *\n     */\n    close() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ready();\n            yield this.flashStore.close();\n        });\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.clear();\n            // add destroy task at the end of the event loop\n            this.asyncBusyState.ready('off').then(() => this.flashStore.destroy());\n        });\n    }\n    ready() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.asyncBusyState.ready('off');\n        });\n    }\n    /////////////////////////////////////////////////////////\n    /**\n     *\n     *\n     * The following methods is all for ES6 Map Interface\n     *\n     *\n     */\n    /////////////////////////////////////////////////////////\n    get size() {\n        return this.cacheMap.size;\n    }\n    get [Symbol.toStringTag]() {\n        return 'FlashStoreSync';\n    }\n    [Symbol.iterator]() {\n        return this.cacheMap[Symbol.iterator]();\n    }\n    entries() {\n        return this.cacheMap.entries();\n    }\n    keys() {\n        return this.cacheMap.keys();\n    }\n    values() {\n        return this.cacheMap.values();\n    }\n    clear() {\n        this.asyncBusyAdd(this.flashStore.clear());\n        return this.cacheMap.clear();\n    }\n    delete(key) {\n        this.asyncBusyAdd(this.flashStore.delete(key));\n        return this.cacheMap.delete(key);\n    }\n    /**\n     * Do not mutate the key/value in the forEach loop!\n     */\n    forEach(callbackfn, thisArg) {\n        /**\n         * 1. no need to call flashStore\n         * 2. callbackfn should not mutate the data, or the data will be lost sync between cache & store\n         */\n        return this.cacheMap.forEach(callbackfn, thisArg);\n    }\n    get(key) {\n        return this.cacheMap.get(key);\n    }\n    has(key) {\n        return this.cacheMap.has(key);\n    }\n    set(key, value) {\n        this.asyncBusyAdd(this.flashStore.set(key, value));\n        this.cacheMap.set(key, value);\n        return this;\n    }\n}\nexport default FlashStoreSync;\n//# sourceMappingURL=flash-store-sync.js.map"],"names":["Brolog","__awaiter","this","__asyncValues","FlashStore","path.join","appRoot","StateSwitch"],"mappings":"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"}