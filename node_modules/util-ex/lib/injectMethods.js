
/* injectMethods(object, methods)

inject methods to an object. You can use `this.super()` to call the original method.
and use `this.self` to get the original `this` object if the original method is exists.

* methods*(object)*:
  * key: the method name to inject
  * value: the new method function
 */

(function() {
  var isArray, isFunction;

  isFunction = require('./is/type/function');

  isArray = require('./is/type/array');

  module.exports = function(aObject, aMethods, aOptions) {
    var inherited, k, replacedMethods, v, _results;
    if (aOptions && aOptions.replacedMethods) {
      replacedMethods = aOptions.replacedMethods;
    }
    if (aMethods instanceof Object) {
      _results = [];
      for (k in aMethods) {
        v = aMethods[k];
        if (!isFunction(v)) {
          continue;
        }
        inherited = aObject[k];
        if (isFunction(inherited) && !(replacedMethods && replacedMethods[k])) {
          _results.push(aObject[k] = (function(inherited, method) {
            return function() {
              var that;
              that = {
                "super": inherited,
                self: this
              };
              return method.apply(that, arguments);
            };
          })(inherited, v));
        } else {
          _results.push(aObject[k] = v);
        }
      }
      return _results;
    }
  };


  /*
  * scope*(object)*: the new function scope
  module.exports = (aObject, aMethods) ->
    if not isArray(aScope) or not isArray(aValues)
      if isObject(aScope)
        keys = Object.keys(aScope)
        aValues = keys.map (k) -> aScope[k]
        aScope = keys
      else
        aValues = []
        aScope = []
    aScope.push 'inherited'
    if aMethods instanceof Object
      for k,v of aMethods
        continue if not isFunction v
        vOrgMethod = aObject[k]
        if not isFunction vOrgMethod
          aObject[k] = v
        else
          aObject[k] = ((inherited)->
            values = aValues.slice()
            values.push inherited
            Function(aScope, "return "+v).apply(@, values)
          )(vOrgMethod)
   */

}).call(this);

//# sourceMappingURL=injectMethods.js.map
